<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="This is the second post.">

        <link rel="icon" href="/img/bakankaya-openart.ico">
        <title>Converting JavaScript to React Component</title>

        <link rel="stylesheet" href="/css/index.css" >
        <link rel="stylesheet" href="/css/theme.css" >
        <link rel="stylesheet" href="/css/prism(1).css" >

        <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="bakankaya&#39;s blog">
		<link rel="alternate" href="/feed/feed.json" type="application/json" title="bakankaya&#39;s blog">

        
        


        <meta name="generator" content="Eleventy v3.0.0">
    </head>
    <body>
        <aside>
            <header>
                <a href="/"> <img class="logo" src="/img/bakankaya-openart.png"></a>
                <a href="/" class="home-link">bakankaya&#39;s blog</a>
                <img src="/img/icons8-menu-48.png" class="hamburger-icon" onClick="toggle()">
            </header>
			<nav id="navigation" class="navigation">
                
                

                <ul class="nav-list" role="list">
                
                    <li>
                    <a href="/">Home</a>
                    </li>
                
                    <li>
                    <details
                        
                        
                        
                        
                        
                            class="is-active"
                            open
                        
                        
                        
                        
                    >
                        <summary>Posts</summary>
                        <ul role="list">
                
                    <li>
                    <a href="/posts/00_hello_world/">Hello, World!</a>
                    </li>
                
                    <li>
                    <a href="/posts/01_show_less/">Show Less/More</a>
                    </li>
                
                    <li>
                    <a href="/posts/Converting_JS_to_React/" aria-current="page" >Converting JavaScript to React Component</a>
                    </li>
                
                    <li>
                    <a href="/posts/Hello/">Hello</a>
                    </li></ul>
                    </details>
                    </li>
                
                
                    <li>
                    <a href="/tags/">Tags</a>
                    </li>
                
                    <li>
                    <a href="/Resources/">Resources</a>
                    </li>
                
                    <li>
                    <a href="/about/aboutme/">About Me</a>
                    </li></ul>
                <footer></footer>
			</nav>

        </aside>

        <main>
            
<div>
<h1>Converting JavaScript to React Component</h1>
<time datetime="2024-07-10">10 July 2024</time>
</div>

<div class="post">
<p>Now that I've finished writing a weather applet. I want to use it in other webpages with more functionality.
Since I have a hammer(React), now everything looks like a nail(a react component).</p>
<p>Joke aside, this feels like a good oppurtunity to remember the differences between vanilla js and react, to see the main differences and etc.</p>
<p>This is a small project to work on, there is one or two function to be translate into jsx. And when I manage to make it a reusable component, I can use it in a meaningful way.</p>
<p>I am going to write it step by step. So lets start with basics.</p>
<h3 id="step-1-creating-a-react-app" tabindex="-1">Step 1 - Creating a React app <a class="header-anchor" href="#step-1-creating-a-react-app">#</a></h3>
<p>I'll create a react prject with vite with following prompts:</p>
<pre class="language-node"><code class="language-node">npm create vite@latest 
    //choosing react
    //then in the folder:
npm install
npm run dev</code></pre>
<p>Now that I've created a react project in the latest fashionable and easy way, lets clear out everything we don't need.</p>
<p>I've cleared out everything from /assets and /public folders. in the index.html file, I've changed the logo and title content.</p>
<p>Then I cleared /src file to leave with these three;</p>
<p>to <code>main.jsx</code>;</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.jsx'</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.StrictMode</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.StrictMode</span></span><span class="token punctuation">></span></span><span class="token punctuation">,</span>
<span class="token punctuation">)</span></code></pre>
<p>to <code>index.css</code>;</p>
<pre class="language-css"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> Inter<span class="token punctuation">,</span> system-ui<span class="token punctuation">,</span> Avenir<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>

  <span class="token property">font-synthesis</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">text-rendering</span><span class="token punctuation">:</span> optimizeLegibility<span class="token punctuation">;</span>
  <span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> antialiased<span class="token punctuation">;</span>
  <span class="token property">-moz-osx-font-smoothing</span><span class="token punctuation">:</span> grayscale<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>and to <code>App.jsx</code>;</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">

    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App</code></pre>
<p>Now we can begin to write our app.</p>
<h3 id="step-2-migrating-html-elements-and-css" tabindex="-1">Step 2 - migrating HTML elements and CSS <a class="header-anchor" href="#step-2-migrating-html-elements-and-css">#</a></h3>
<p>React needs one parent element to render. This can be done with a <code>&lt;&gt;&lt;/&gt;</code> fragment when necessary but we already made our whole app in single div so, this wasn't a problem for us.</p>
<p>in React, we need to use <code>className</code> instead of <code>class</code>. So every class property needs to change <code>className</code>.</p>
<p>on first glance last thing we need to correct is the <code>onClick=&quot;window.location.reload()</code> part. This will translate into a function so erase this with the inital <code>value=&quot; &quot;</code>  from our input and button elements.</p>
<p>For CSS, I just copied our css file to src file, named it same with the App.css to easily identify with our app and import it to App.jsx with this line:</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token string">'./App.css'</span><span class="token punctuation">;</span></code></pre>
<p>Not in this project but in later on, I might handle dependencies like icons and fonts, be careful to import them accordingly to your app.</p>
<p>So far so good. No major problem.</p>
<h3 id="step-3-getting-the-date" tabindex="-1">Step 3 - Getting the Date <a class="header-anchor" href="#step-3-getting-the-date">#</a></h3>
<p>First part of our js file was to get the days date, convert it to a readible format and instert it to DOM.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> optionsDate <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">weekday</span><span class="token operator">:</span> <span class="token string">'long'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">year</span><span class="token operator">:</span> <span class="token string">'numeric'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">month</span><span class="token operator">:</span> <span class="token string">'long'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">day</span><span class="token operator">:</span> <span class="token string">'numeric'</span><span class="token punctuation">,</span>
<span class="token comment">//    dayPeriod: 'short'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> optionsTime <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">timeStyle</span><span class="token operator">:</span> <span class="token string">'short'</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".date span"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">toLocaleDateString</span><span class="token punctuation">(</span><span class="token string">'en-EN'</span><span class="token punctuation">,</span> optionsDate<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>I'm going to add it as it is to the start of our App function with one change:</p>
<p>last line was for JS and all <code>document.querySelector</code> part won't work in react. Because nothing triggers it.(I guess?) So instead i will make it a variable named 'todaysDate' and in our return part where we render the page I'm going to call the variable with bracelets.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> todaysDate <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">toLocaleDateString</span><span class="token punctuation">(</span><span class="token string">'en-EN'</span><span class="token punctuation">,</span> optionsDate<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"weather-thingy"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"date"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token punctuation">{</span>todaysDate<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre>
<p>I could have made another function to get the date and call it like a HTML property instead of call it as variable. ie. <code>&lt;TodaysDate /&gt;</code>, this is the common react way, to make it a component. but I dont need another component. I want to make the weather app a standalone component.</p>
<p>Now our getting the date part is working, and we get to show using a variable in react.</p>
<h3 id="step-4-implementing-useref-to-the-api-call" tabindex="-1">Step 4 - Implementing useRef to the API call <a class="header-anchor" href="#step-4-implementing-useref-to-the-api-call">#</a></h3>
<p>Now the whole <code>fetch()</code> part is working fine. But we have problem at getting the city name for our API call. Because initally we are reading from DOM, and use it as a variable. But now, react uses Virtual DOM and because of that.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> cityQuery <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".location input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> city <span class="token operator">=</span> cityQuery<span class="token punctuation">.</span>value<span class="token punctuation">;</span></code></pre>
<p>Part is not reading any value. while it is still possible to use it, react encourages the usage of <code>useRef</code>. So after importing the <code>useRef</code> I changed the following lines:</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> cityQuery <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token string">'ankara'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> city <span class="token operator">=</span> cityQuery<span class="token punctuation">.</span>current<span class="token punctuation">;</span>

<span class="token operator">...</span>

<span class="token keyword">return</span> <span class="token punctuation">(</span>

<span class="token operator">...</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Enter city<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>cityQuery<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
<span class="token punctuation">)</span>
</code></pre>
<p>instead of reading the value, we are referancing the input.</p>
<p>With the inital value, before making a request it still returns a city name.</p>
<p>and in our city variable, which we use in URL, instead of value, we are using <code>.current</code> to read the initail value, or the changed value.</p>
<h3 id="step-5-search-button-and-changing-the-refresh" tabindex="-1">Step 5 - Search Button and changing the refresh <a class="header-anchor" href="#step-5-search-button-and-changing-the-refresh">#</a></h3>
<p>On our JS app, we simply overwrite the default input value then refresh the page on HTML with</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token string">"window.location.reload()"</span><span class="token operator">></span>Search<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span></code></pre>
<p>But it is an inefficient hack at best. And not a reasonable way to do things in react.</p>
<p><em>to be continued...</em></p>

</div>

<ul class="post-metadata">
	<span>Tags:</span>
	<li><a href="/tags/react/" class="post-tag">React</a></li>
	<li><a href="/tags/javascript/" class="post-tag">JavaScript</a></li>
	<li><a href="/tags/vite/" class="post-tag">Vite</a></li>
</ul>
<div class="links-nextprev"><a class="prev" href="/posts/01_show_less/"><span>Show Less/More</span><span>:Prev</span></a><a class="next" href="/posts/Hello/"><span>Next:</span><span>hello</span></a>
</div>
        </main>

        <script>
        function toggle() {
            var x = document.getElementById("navigation");
            if (x.className === "navigation") {
                x.className += " visible";
            } else {
                x.className = "navigation";
            }
        }
        </script>
    </body>
</html>